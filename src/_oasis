OASISFormat: 0.3
Name:        frenetic
Version:     1.0
Synopsis:    Frenetic Network Programming Language
Authors:     See the AUTHORS file
License:     LGPL
Plugins:     META (0.3)
BuildTools:  ocamlbuild

Flag freneticlib
  Description: Build FreneticLib
  Default: false

Flag packetlib
  Description: Build PacketLib
  Default: false

Flag openflowlib
  Description: Build OpenFlowLib
  Default: false

Flag oxlib
  Description: Build OxLib
  Default: false

Flag netcorelib
  Description: Build NetCoreLib
  Default: false

Flag freneticexec
  Description: Build Frenetic
  Default: false

Flag others
  Description: build tests and Ox examples
  Default: false

Flag alltargets
  Description: build all targets
  Default: false

Library FreneticLib
  Build$: flag(alltargets) || flag(freneticlib) 
  Path: FreneticLib
  BuildDepends: lwt,lwt.unix,cstruct,lwt.syntax
  Findlibname: FreneticLib
  Modules:
    Frenetic_Misc,
    Frenetic_Log,
    Frenetic_List,
    Frenetic_Bit,
    Frenetic_Socket

Library PacketLib
  Build$: flag(alltargets) || flag(packetlib)
  Path: PacketLib
  BuildDepends: cstruct,cstruct.syntax,FreneticLib
  Findlibname: PacketLib
  Modules: Packet

Library OpenFlowLib
  Build$: flag(alltargets) || flag(openflowlib)
  Path: OpenFlowLib
  BuildDepends:
    lwt,lwt.unix,cstruct,cstruct.syntax,lwt.syntax,FreneticLib,PacketLib
  Findlibname: OpenFlowLib
  Modules:
    OpenFlow0x01,
    OpenFlow0x01_Core,
    OpenFlow0x01_Stats,
    OpenFlow0x01_PlatformSig,
    OpenFlow0x01_Platform,
    OpenFlow0x01_TestPlatform,
    OpenFlow0x04,
    OpenFlow0x04_Core,
    OpenFlow0x04_Platform,
    OpenFlow0x04_Misc

Library OxLib
  Build$: flag(alltargets) || flag(oxlib)
  Path: OxLib
  BuildDepends:
    lwt,lwt.syntax,cstruct,PacketLib,OpenFlowLib
  Findlibname: OxLib
  InternalModules:
    OxShared
  Modules:
    OxStart,
    OxPlatform

Library NetCoreLib
  Build$: flag(alltargets) || flag(netcorelib)
  Path: NetCoreLib
  BuildDepends:
    lwt,lwt.unix,cstruct,PacketLib,OpenFlowLib,FreneticLib,lwt.syntax,str
  Findlibname: NetCoreLib
  InternalModules:
    NetCore_Action,
    NetCore_Classifier,
    NetCore_Compiler,
    NetCore_Desugar,
    NetCore_Gensym,
    NetCore_Lexer,
    NetCore_Monitoring,
    NetCore_Parser,
    NetCore_Parsing,
    NetCore_Pattern,
    NetCore_Wildcard,
    NetCore_SurfaceSyntax
  Modules:
    NetCore_Controller,
    NetCore_ConsistentUpdates,
    NetCore_Pretty,
    NetCore_MacLearning,
    NetCore_NAT,
    NetCore_Semantics,
    NetCore_Stream,
    NetCore_StatefulFirewall,
    NetCore_Topo,
    NetCore_Types

Executable Frenetic
  Build$: flag(alltargets) || flag(freneticexec)
  Path: Applications
  MainIs: Frenetic.ml
  BuildDepends: lwt,lwt.syntax,NetCoreLib
  Install: False

Document doc
  Build$: flag(docs)
  Title: Frenetic documentation
  Type: ocamlbuild (0.3)
  BuildTools+: ocamldoc
  XOCamlBuildPath: .
  XOCamlBuildLibraries: OpenFlowLib,PacketLib,NetCoreLib
  Install: False

Executable Test_Frenetic
  Build$: flag(alltargets) || flag(others)
  Path: Applications
  MainIs: Test.ml
  BuildDepends: oUnit,PacketLib,FreneticLib,NetCoreLib
  Install: False

Executable OxRepeater
  Build$: flag(alltargets) || flag(others)
  Path: Applications
  MainIs: OxRepeater.ml
  BuildDepends: OxLib
  Install: False

Executable OxLearning
  Build$: flag(alltargets) || flag(others)
  Path: Applications
  MainIs: OxLearning.ml
  BuildDepends: OxLib
  Install: False

Executable OxMonitor
  Build$: flag(alltargets) || flag(others)
  Path: Applications
  MainIs: OxMonitor.ml
  BuildDepends: OxLib
  Install: False

Executable Verify
  Build$: flag(alltargets) || flag(others)
  Path: Applications
  MainIs: Verify.ml
  Custom: true
  BuildDepends: NetCoreLib
  Install: False